{"config.json":"{\"mode\":\"code\",\"github\":null,\"board\":\"openbit\",\"level\":\"Beginner\"}","main.py":"from machine import Pin\r\nfrom time import sleep\r\nimport ESPNOW as now\r\nimport OLED\r\nimport _thread\r\n\r\nswone = Pin(15, Pin.IN)\r\nswtwo = Pin(2, Pin.IN)\r\nswa = Pin(5, Pin.IN)\r\nswb = Pin(12, Pin.IN)\r\n\r\noled = OLED.SSD1306_I2C(128, 64)\r\n\r\nprint(now.getMyMAC())\r\n# 8C:CE:4E:BB:4A:FC\r\nmain_process = True\r\nrecei_point = True\r\nA_Point = \"0\"\r\nB_Point = \"0\"\r\nsum_num = 0\r\ncount = 0\r\ntwosec = False\r\nbuz_tone = 2000\r\nA_timer = 60\r\nB_timer = 60\r\nbuz_time = 0\r\nsw1_plus_time = 0\r\nsw2_plus_time = 0\r\nswA_plus_time = 0\r\nswB_plus_time = 0\r\nplus_point = 0\r\ntotal = 0\r\nprocess = False\r\n\r\n\r\ndef oled_show_in_background():\r\n    global oled_show, A_Point, B_Point\r\n    while oled_show:\r\n        pass\r\n        # print(\"oled_show_process\")\r\n\r\n# _thread.start_new_thread(oled_show_in_background, ())\r\n\r\ndef receiver_Point():\r\n    global A_Point, B_Point, A_timer, B_timer, step_process, total\r\n    temporary_count = 0\r\n    while recei_point:\r\n        #------------------\r\n        sw1 = swone()\r\n        sw2 = swtwo()\r\n        swA = swa()\r\n        swB = swb()\r\n        #------------------\r\n        if now.isReadyToRead():\r\n            now.readAsText()\r\n            Point = now.readAsText()\r\n            if Point[0] == \"A\":\r\n                condition = Point[1:3]\r\n                if condition < \"10\":\r\n                    A_Point = Point[2:3]\r\n                else:\r\n                    A_Point = Point[1:3]\r\n            elif Point[0] == \"B\":\r\n                condition = Point[1:3]\r\n                if condition < \"10\":\r\n                    B_Point = Point[2:3]\r\n                else:\r\n                    B_Point = Point[1:3]\r\n            elif Point[0] == \"R\":\r\n                A_Point = Point[1:2]\r\n                B_Point = Point[3:4]\r\n            \r\n        temporary_count += 1\r\n        if temporary_count >= 5:\r\n            A_timer -= 1\r\n            B_timer -= 1\r\n            temporary_count = 0\r\n        \r\n        oled.fill(0)\r\n        oled.text(\"Ready To Play\", 0, 0, 1)\r\n        oled.text(f\"A :{A_Point}  {A_timer}\", 0, 20, 1)\r\n        oled.text(f\"B :{B_Point}  {B_timer}\", 0, 30, 1)\r\n        oled.show()\r\n        sleep(0.1)\r\n\r\n        if swA == 0 and sw1 == 0:\r\n            total = int(A_Point) + int(B_Point)\r\n            show = str(total)\r\n            oled.text(f\"total score {show}\", 5, 45, 1)\r\n            oled.show()\r\n            sleep(1)\r\n        elif swB == 0 and sw2 == 0:\r\n            total = 0\r\n\r\n        if A_timer == 0 and B_timer == 0:\r\n            now.send(\"ALL-Reset\", \"10:97:BD:21:2D:F0\")\r\n            A_Point = 0\r\n            B_Poin = 0\r\n            oled.text(f\"Time OUT DRAW\", 8, 45, 1)\r\n            oled.show()\r\n            sleep(1)\r\n            oled.fill(0)\r\n            while sw1 == 1:\r\n                sw1 = swone()\r\n                oled.text(f\"Game Stop\", 25, 45, 1)\r\n                oled.show()\r\n                if sw1 == 0:\r\n                    A_timer = 8\r\n                    B_timer = 8\r\n                    break\r\n        elif A_timer == 0:\r\n            now.send(\"ALL-Reset\", \"10:97:BD:21:2D:F0\")\r\n            A_Point = 0\r\n            B_Poin = 0\r\n            oled.text(f\"Time OUT B-WIN\", 5, 45, 1)\r\n            oled.show()\r\n            sleep(1)\r\n            oled.fill(0)\r\n            while sw1 == 1:\r\n                sw1 = swone()\r\n                oled.text(f\"Game Stop\", 25, 45, 1)\r\n                oled.show()\r\n                if sw1 == 0:\r\n                    A_timer = 8\r\n                    B_timer = 8\r\n                    break\r\n        elif B_timer == 0:\r\n            now.send(\"ALL-Reset\", \"10:97:BD:21:2D:F0\")\r\n            A_Point = 0\r\n            B_Poin = 0\r\n            oled.text(f\"Time OUT A-WIN\", 5, 45, 1)\r\n            oled.show()\r\n            sleep(1)\r\n            oled.fill(0)\r\n            while sw2 == 1:\r\n                sw2 = swtwo()\r\n                oled.text(f\"Game Stop\", 25, 45, 1)\r\n                oled.show()\r\n                if sw2 == 0:\r\n                    A_timer = 8\r\n                    B_timer = 8\r\n                    break\r\n        \r\n\r\n_thread.start_new_thread(receiver_Point, ())\r\n\r\ndef main_process():\r\n    global main_process, A_Point, B_Point, sum_num, twosec, count, buz_tone, A_timer, B_timer, buz_time, sw1_plus_time, sw2_plus_time, swA_plus_time, swB_plus_time, plus_point, process\r\n    tim = 0\r\n    while main_process:\r\n        #------------------\r\n        sw1 = swone()\r\n        sw2 = swtwo()\r\n        swA = swa()\r\n        swB = swb()\r\n        #------------------\r\n        display.show(\"T\")\r\n        if sw1 == 0 and sw2 == 1 and swA == 1:\r\n            tim = 0\r\n            sw1_plus_time += 0.2\r\n            sleep(0.1)\r\n            if sw1_plus_time <= 0.2:\r\n                plus_point += 1\r\n                print(f\"plus_point = {plus_point}\")\r\n                if plus_point == 2:\r\n                    A_timer += 60\r\n                    plus_point = 0\r\n            if sw1_plus_time > 0.25:\r\n                plus_point = 0\r\n                if sw1 == 0 and twosec == False and sw2 == 1:\r\n                    now.send(\"A-UP\", \"10:97:BD:21:2D:F0\")\r\n                    print(f\"count After = {count}\")\r\n                    count += 1\r\n                    print(f\"count Before = {count}\")\r\n                    print(f\"sw1_plus_time {sw1_plus_time}\")\r\n                    buzzer.tone(buz_tone, 1)\r\n                    if count >= 2:\r\n                        twosec = True\r\n                elif count >= 2:\r\n                    print(f\"twosec = {twosec}\")\r\n                    if count >= 2 and sw1 == 0 and sw2 == 1:\r\n                        now.send(\"A-HIGH-UP\", \"10:97:BD:21:2D:F0\")\r\n                        print(\"Im in\")\r\n                        buzzer.tone(buz_tone, 1)\r\n                        buz_tone = 1000    \r\n\r\n        elif sw2 == 0 and sw1 == 1 and swB == 1:\r\n            tim = 0\r\n            sw2_plus_time += 0.2\r\n            sleep(0.1)\r\n            if sw2_plus_time <= 0.2:\r\n                plus_point += 1\r\n                print(plus_point)\r\n                if plus_point == 2:\r\n                    B_timer += 60\r\n                    plus_point = 0\r\n            if sw2_plus_time > 0.25:\r\n                plus_point = 0\r\n                if sw2 == 0 and twosec == False and sw1 == 1:\r\n                    now.send(\"A-DOWN\", \"10:97:BD:21:2D:F0\")\r\n                    print(f\"count After = {count}\")\r\n                    count += 1\r\n                    print(f\"count Before = {count}\")\r\n                    print(f\"sw2_plus_time {sw2_plus_time}\")\r\n                    buzzer.tone(buz_tone, 1)\r\n                    if count >= 2:\r\n                        twosec = True\r\n                elif count >= 2:\r\n                    print(f\"twosec = {twosec}\")\r\n                    if count >= 2 and sw2 == 0 and sw1 == 1:\r\n                        now.send(\"A-HIGH-DOWN\", \"10:97:BD:21:2D:F0\")\r\n                        print(\"Im in\")\r\n                        buzzer.tone(buz_tone, 1)\r\n                        buz_tone = 1000\r\n\r\n        elif swA == 0 and twosec == False and sw1 == 1:\r\n            now.send(\"B-UP\", \"10:97:BD:21:2D:F0\")\r\n            count += 1\r\n            print(count)\r\n            buzzer.tone(buz_tone, 1)\r\n            if count >= 2:\r\n                twosec = True\r\n        elif count >= 2 and swA == 0:\r\n            now.send(\"B-HIGH-UP\", \"10:97:BD:21:2D:F0\")\r\n            print(\"Im in\")\r\n            buzzer.tone(buz_tone, 1)\r\n            buz_tone = 1000\r\n        elif swB == 0 and twosec == False and sw2 == 1:\r\n            now.send(\"B-DOWN\", \"10:97:BD:21:2D:F0\")\r\n            count += 1\r\n            print(count)\r\n            buzzer.tone(buz_tone, 1)\r\n            if count >= 2:\r\n                twosec = True\r\n        elif count >= 2 and swB == 0:\r\n            now.send(\"B-HIGH-DOWN\", \"10:97:BD:21:2D:F0\")\r\n            print(\"Im in\")\r\n            buzzer.tone(buz_tone, 1)\r\n            buz_tone = 1000\r\n        elif sw1 == 0 and sw2 == 0:\r\n            count += 1\r\n            print(count)\r\n            buzzer.tone(buz_tone, 1)\r\n            if count >= 3:\r\n                now.send(\"ALL-Reset\", \"10:97:BD:21:2D:F0\")\r\n                oled.text(f\"ALL_Reset\", 25, 45, 1)\r\n                oled.show()\r\n                sleep(1)\r\n                count = 0\r\n        else:\r\n            sw1_plus_time = 0\r\n            sw2_plus_time = 0\r\n            buz_tone = 2000\r\n            \r\n            tim += 1\r\n            count = 0\r\n            twosec = False\r\n            if tim >= 15:\r\n                plus_point = 0\r\n                tim = 0\r\n\r\n        \r\n\r\nmain_process()\r\n\r\n\r\n# num = int(input(\"Input Number :\"))\r\n# sum_num += num\r\n# print(f\"sum_num = {sum_num}\")\r\n# count += 1\r\n# print(f\"count = {count}\")\r\n\r\n# cal = sum_num / count\r\n# print(f\"calcu = {cal}\")"}